syntax = "proto3";

package chunkreplication.v1;
option go_package = "eddisonso.com/go-gfs/proto/chunkreplication;chunkreplication";

message ReplicationMetadata {
    string opId        = 1;
    string chunkHandle = 2;
    int64  length      = 3;
    int64  epoch       = 4;
}

message ReplicationData {
    bytes  data   = 1;
    uint64 seq    = 2;
}

message ReplicationFrame {
    oneof kind {
        ReplicationMetadata meta = 1;
	ReplicationData data = 2;
    }
}

message ReplicationResponse {
    bool success = 1;
    string message = 2;
}

service Replicator {
    rpc Replicate (stream ReplicationFrame) returns (ReplicationResponse);
}
